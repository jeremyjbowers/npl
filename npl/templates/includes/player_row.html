{% load humanize %}
<tr class="{% if p.options == '99'%} red{% endif %}{% if not team %}{% if p.team %} owned{% endif %}{% endif %}">
  {% if is_waivers %}
  <td style="text-align:center;"><input type="checkbox" id="{{ p.mlb_id }}" name="outright_claims" value="{{ p.mlb_id }}"></td>
  {% elif team %}
      {% if p.is_roster_40_man %}
          <td style="text-align:center;"><span class="icon"><i class="fa fa-check-circle" aria-hidden="true"></i></span></td>
          <td style="text-align:center;"><select class="custom-select custom-select-sm">
              <option name="outright_to_aaa" value="{{ p.mlb_id }}">Place on Outright Waivers</option>
                <!-- TODO: if player is not on active roster, give ability to recall option. There are also rules governing this -->
              {% if p.options != '99' and p.options is not None and p.options != '0'%}<option name="option_to_minors" value="{{ p.mlb_id }}"> Option to Minors</option> {%  endif %}
              <option name="release" value="{{ p.mlb_id }}">Release</option>
          </select></td>
      {% else %}
          <td style="text-align:center;"><span class="icon"><i class="fa fa-times-circle-o" aria-hidden="true"></i></span></td>
          <td><select class="custom-select custom-select-sm">
              <option name="purchase_contract" value="{{ p.mlb_id }}">Purchase Contract</option>
              <option name="release" value="{{ p.mlb_id }}">Release</option>
          </select><</td>{% endif %}

  {% endif %}
  <td>
    <strong><a href="/players/{{ p.mlb_id }}/">{{ p.name }}</a></strong>{% if not team %}{% if p.team %}<small> @ <strong><a href="/teams/{{ p.team.nickname|lower }}/">{{ p.team.nickname }}</a></strong></small>{% endif %}{% endif %}</br>
    {% if user.is_staff %}<small><a target="_blank" href="/admin/npl/player/{{ p.mlb_id }}/change/"><span class="icon"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></span></a></small>{% endif %}
    <small><a target="_blank" href="{{ p.mlb_url }}">MLB&nbsp;&rarr;</a></small>
  </td>
  <td style="text-align:center;">{{ p.position|default_if_none:"" }}</td>
  <td style="text-align:center;">{{ p.age|default_if_none:"" }}</td>
  <td style="text-align:center;">{{ p.mlb_org|default_if_none:""}}</td>
    <td style="text-align:center;">{% if p.is_roster_40_man %}{{ p.mls_time|floatformat:"1" }}{% else %}{{ p.mls_year|default_if_none:"" }}{% endif %}</td>
    <td style="text-align:center;">{{ p.options|default_if_none:"" }}</td>
    <td style="text-align:center;">{{ p.status|default_if_none:""|upper }}</td>
    {% if team or is_waivers %}
    <!-- contract stuff -->
    {% if p.contract %}
      {% for year in p.contract.years %}
        <td style="text-align:center;">{% if year.amount != "-" %}${% endif %}{{ year.amount|intcomma }}</td>
      {% endfor %}
    {% else %}
    <td style="text-align:center;">-</td>
    <td style="text-align:center;">-</td>
    <td style="text-align:center;">-</td>
    <td style="text-align:center;">-</td>
    <td style="text-align:center;">-</td>
    <td style="text-align:center;">-</td>
    <td style="text-align:center;">-</td>
    <td style="text-align:center;">-</td>
    {% endif %}
  {% endif %}
</tr>