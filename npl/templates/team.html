{% extends "base.html" %}

{% block title %}{{ team.name }} - The NPL{% endblock %}

{% block content %}
<div class="block">
    <div class="box">
        <h1 class="title is-3">{{ team.name }}</h1>
        <div class="subtitle">
            <span class="icon-text">
                <span class="icon">
                    <i class="fas fa-user"></i>
                </span>
                <span>
                    <strong>Owner{% if team.owners.all|length > 1 %}s{% endif %}:</strong>
                    {% for owner in team.owners.all %}
                        {% if not forloop.first %}, {% endif %}
                        <span class="tag is-light">{{ owner }}</span>
                    {% endfor %}
                </span>
            </span>
        </div>
        
        {% if team.league %}
        <div class="field is-grouped is-grouped-multiline">
            <div class="control">
                <span class="tag is-info">
                    <span class="icon">
                        <i class="fas fa-trophy"></i>
                    </span>
                    <span>{{ team.league.name }}</span>
                </span>
            </div>
        </div>
        {% endif %}
    </div>
</div>

<div class="block">
    <nav class="level position-count has-background-light p-4" style="border-radius: 8px;">
        <div class="level-item has-text-centered">
            <div>
                <p class="heading">Total</p>
                <p class="title">{{ total_count }}</p>
            </div>
        </div>
        <div class="level-item has-text-centered">
            <div>
                <p class="heading">40-man</p>
                <p class="title">{{ roster_40_man_count }}</p>
            </div>
        </div>
        {% regroup hitters by simple_position as position_players %}
        {% for position in position_players %}
        <div class="level-item has-text-centered">
            <div>
                <p class="heading">{{ position.grouper }}</p>
                <p class="title">
                    <a href="#position-{{ position.grouper }}" class="has-text-dark">
                        {{ position.list|length }}
                    </a>
                </p>
            </div>
        </div>
        {% endfor %}
        <div class="level-item has-text-centered">
            <div>
                <p class="heading">P</p>
                <p class="title">
                    <a href="#position-p" class="has-text-dark">{{ pitchers|length }}</a>
                </p>
            </div>
        </div>
    </nav>
</div>

<div class="block">
    <h2 class="title is-4" id="mlb-roster">
        MLB Roster
        <a href="#top" class="button is-small is-light ml-2">
            <span class="icon">
                <i class="fas fa-arrow-up"></i>
            </span>
            <span>top</span>
        </a>
    </h2>
    
    <div class="table-container">
        <table class="table is-fullwidth is-striped is-hoverable">
            <thead>
                <tr>
                    <th>Pos</th>
                    <th>Player</th>
                    <th></th>
                    <th>Roster</th>
                    <th>Age</th>
                    <th>MLB</th>
                    <th>MLS</th>
                    <th>Opt</th>
                    <th>Status</th>
                    <th>2024</th>
                    <th>2025</th>
                    <th>2026</th>
                    <th>2027</th>
                    <th>2028</th>
                    <th>2029</th>
                    <th>2030</th>
                    <th>2031</th>
                </tr>
            </thead>
            <tbody>
                {% for p in mlb_pitchers %}{% include "includes/player_row.html" %}{% endfor %}
                {% regroup mlb_hitters by simple_position as position_players %}
                {% for position in position_players %}
                    {% for p in position.list %}{% include "includes/player_row.html" %}{% endfor %}
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="block">
    <h2 class="title is-4" id="aaa-roster">
        AAA Roster
        <a href="#top" class="button is-small is-light ml-2">
            <span class="icon">
                <i class="fas fa-arrow-up"></i>
            </span>
            <span>top</span>
        </a>
    </h2>
    
    <div class="table-container">
        <table class="table is-fullwidth is-striped is-hoverable">
            <thead>
                <tr>
                    <th>Pos</th>
                    <th>Player</th>
                    <th></th>
                    <th>Roster</th>
                    <th>Age</th>
                    <th>MLB</th>
                    <th>MLS</th>
                    <th>Opt</th>
                    <th>Status</th>
                    <th>2025</th>
                    <th>2026</th>
                    <th>2027</th>
                    <th>2028</th>
                    <th>2029</th>
                    <th>2030</th>
                    <th>2031</th>
                    <th>2032</th>
                </tr>
            </thead>
            <tbody>
                {% for p in aaa_pitchers %}{% include "includes/player_row.html" %}{% endfor %}
                {% regroup aaa_hitters by simple_position as position_players %}
                {% for position in position_players %}
                    {% for p in position.list %}{% include "includes/player_row.html" %}{% endfor %}
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="block">
    <h2 class="title is-4" id="aa-roster">
        AA Roster
        <a href="#top" class="button is-small is-light ml-2">
            <span class="icon">
                <i class="fas fa-arrow-up"></i>
            </span>
            <span>top</span>
        </a>
    </h2>
    
    <div class="table-container">
        <table class="table is-fullwidth is-striped is-hoverable">
            <thead>
                <tr>
                    <th>Pos</th>
                    <th>Player</th>
                    <th></th>
                    <th>Roster</th>
                    <th>Age</th>
                    <th>MLB</th>
                    <th>MLS</th>
                    <th>Opt</th>
                    <th>Status</th>
                    <th>2023</th>
                    <th>2024</th>
                    <th>2025</th>
                    <th>2026</th>
                    <th>2027</th>
                    <th>2028</th>
                    <th>2029</th>
                    <th>2030</th>
                </tr>
            </thead>
            <tbody>
                {% for p in aa_pitchers %}{% include "includes/player_row.html" %}{% endfor %}
                {% for p in aa_hitters %}{% include "includes/player_row.html" %}{% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="block">
    <h2 class="title is-4" id="a-roster">
        A Roster
        <a href="#top" class="button is-small is-light ml-2">
            <span class="icon">
                <i class="fas fa-arrow-up"></i>
            </span>
            <span>top</span>
        </a>
    </h2>
    
    <div class="table-container">
        <table class="table is-fullwidth is-striped is-hoverable">
            <thead>
                <tr>
                    <th>Pos</th>
                    <th>Player</th>
                    <th></th>
                    <th>Roster</th>
                    <th>Age</th>
                    <th>MLB</th>
                    <th>MLS</th>
                    <th>Opt</th>
                    <th>Status</th>
                    <th>2023</th>
                    <th>2024</th>
                    <th>2025</th>
                    <th>2026</th>
                    <th>2027</th>
                    <th>2028</th>
                    <th>2029</th>
                    <th>2030</th>
                </tr>
            </thead>
            <tbody>
                {% for p in a_pitchers %}{% include "includes/player_row.html" %}{% endfor %}
                {% for p in a_hitters %}{% include "includes/player_row.html" %}{% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}